[TOC]

# 08 09 方法的定义,调用与调试

## 方法的由来
- 方法的前身是C/C++的函数
    - 方法就是成员函数
- C#中方法永远是类/结构体的成员
    - 表达类的作用
- 方法/函数的作用
    - 隐藏复杂的逻辑
    - 大算法分解为小算法:自顶下下
    - 复用/重用


## 方法的定义与调用  
- 声明方法的语法详解
    - C#中方法声明与定义在一起,不需要单独的声明
    - parameter:形参
- 命名规范
- 静态方法和实例方法
- 调用方法
    - argument:实参

## 构造器
-  类型的成员之一
-  狭义的构造器指实例构造器

### 如何调用构造器
- 没有自己写构造器,会自动调用默认构造器

### 声明构造器

### 构造器的内存原理
- 首先申请引用变量的内存,然后根据构造器的情况为实例在堆中申请内存,然后将堆的地址存入引用变量的内存地址所指向的内存,若此堆内存有类类型等引用变量,则再从堆中寻找内存,然后将申请的堆内存首地址存入
    - 即:值类型直接存储,引用类型申请新的内存,然后将新内存的地址存入其中

## 方法的重载(Overload)
- 调用重载方法的示例
    - 例如`Console.WriteLine()`有19个重载函数
- 声明带有重载的方法
    - 方法签名:方法的名称 + 类型参数的个数 + 从左到右形参的顺序及类型和种类
        - 不包括返回值
    - 实例构造函数签名:每一个从左到右形参的顺序形参及类型和种类(值,引用或输出)
    - 重载决策:用于在给定了参数列表和一组候选函数成员的情况下,选择一个最佳函数成员来实施调用

## 如何对方法进行debug(重要)   
- 设置断点
- 观察方法调用时的call stack(调用栈)
- Step in, Step over, Step out
    - Step out(Shift + F11):返回调用的地方
- 观察局部变量的值与变化
    - Locas窗口观察

## 方法的调用与栈(重要)
- 方法调用时栈内存的分配
    - 对Stack frame(栈中内存布局)的分析
        - 传入参数归主调函数Caller管理,先将左边的参数压入栈

## 推荐资料 
- CLR via C#
- C# in Depth